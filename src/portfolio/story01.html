<html xmlns:cogdoc="http://www.cognex.com/cogdoc">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="msdn.css">
<TITLE>Creating a Vision Application: QuickBuild</TITLE>
</head>
<body topmargin="0" id="bodyID" class="dtBODY">
<div id="nsbanner">
<div id="bannerrow1">
<TABLE CLASS="bannerparthead" CELLSPACING="0">
<TR ID="hdr">
<TD CLASS="runninghead" nowrap="">Application Development Guide</TD>
</TR>
</TABLE>
</div>
<div id="TitleRow">
<H1 class="dtH1">Creating a Vision Application: QuickBuild</H1>
</div>
</div>
<div id="nstext" valign="bottom">
<p>QuickBuild lets you interactively build powerful, robust, ready-to-deploy vision applications quickly. This tutorial will take you from the first step of setting up your vision tools to building an executable vision application.</p>
<h1><a name="#what_youll_be_doing"></a>What You'll Be Doing</h1>
<p>Building a vision application with VisionPro is a three step process:</p>
<ol>
<li>Use QuickBuild to develop and refine your vision application.
					<p class="fig"><img src="p/story01.overview75.gif"></p>
</li>
<li><a href="ms-its:GettingStarted.chm::/storyAW.html">Use the Application Wizard</a> to create a user interface for your users
				and to generate the executable application.
			</li>
<li><a href="ms-its:GettingStarted.chm::/storyGA.html">Test and deploy</a>  the executable application.
			</li>
</ol>
<p>
			The application you'll be building in this tutorial
			counts coins in an image and determines whether
			the image contains a minimum number of coins.
			It uses the PMAlign tool to identify coins in an image
			and various other tools to report results.
		</p>
<h1><a name="#starting_quickbuild"></a>Starting QuickBuild</h1>
<p>VisionPro installs the QuickBuild icon on your Windows desktop</p>
<p class="fig"><img src="p/story01.QBIcon.gif"></p>
<p>
				To launch QuickBuild, double-click the icon or choose
				<b>Start-&gt;Cognex-&gt;VisionPro-&gt;VisionPro QuickBuild</b> from the Windows Start menu.
				The initial QuickBuild window appears:
		</p>
<p class="fig"><img src="p/story01.qbinitial.gif"></p>
<p>And now you're ready to begin.</p>
<h1><a name="#establish_an_image_source"></a>Establish an Image Source</h1>
<p>The first thing to do in developing a vision application is to establish an image source. Typically, the image source is a camera connected to a Cognex frame grabber or a FireWire camera connected to an IEEE-DCAM adapter. When you're developing an application, however, it's convenient to use an image database. Ideally, the image database should contain a range of the kinds of images you're likely to encounter in your application. </p>
<p>Although in this example we use an image database, for most applications
			you will want to acquire images from a camera. We recommend you make
			a complete pass through <b>QuickBuild -&gt; Application Wizard -&gt; Test</b>, and
			completely debug your application. When you are ready to deploy, rerun
			<b>QuickBuild</b> and change to camera acquisition instead of using an image database, then run the <b>Application
			Wizard</b> again and prepare a deployment executable. 			
		</p>
<p>The following section describes how to setup a camera for acquisition
			in a deployed application. The section
			after that,  <a href="ms-its:GettingStarted.chm::/story01.html#Opening_an_Image_Database">Opening an Image Database</a>, 
			continues on with this tutorial and shows you how to
			use an image database for application development.		
		</p>
<h2><a name="#camera_acquisition"></a>Camera Acquisition</h2>
<p>To acquire images from a camera, do the following:	
	</p>
<ol>
<li>Double-click the <b>Image Source</b> item in the QuickBuild window.</li>
<p>QuickBuild opens a <b>QuickBuild Job Editor</b> dialog and then an <b>Image Source</b> dialog. </p>
<li>In the <b>Image Source</b> dialog, select <b>Acquire from camera</b>. You will see the following dialog.</li>
<p class="fig"><img src="p/story01.chooseCamera.gif"></p>
<li>The <b>Frame Grabbers</b> pull down menu will list the frame grabbers on your system.
				Choose the frame grabber you wish to use.</li>
<li>The <b>Video Formats</b> pull down menu will then list the camera video formats available
				for the cameras supported by the selected frame grabber. Choose the video format for the
				camera you are using. </li>
<li>In the <b>Camera Port</b> pull down menu, select the port you are using for your camera. </li>
<li>Click on <b>Initialize Acquisition</b> to prepare your camera to acquire images. </li>
<p>When your camera and frame grabber are initialized, you will see that the <b>Image Source</b>
				window now includes new tabs: <b>Strobe and Trigger, Image Properties,</b> and <b>Lookup Table</b>.
				</p>
<p>Note that the <b>Lookup Table</b> tab is displayed only if your camera supports a lookup table. </p>
<p class="fig"><img src="p/story01.chooseSettings.gif"></p>
<li>Click the <b>Live Display</b> button in the dialog.
				<p>
					A live display window opens that provides a real time display of images from your camera .
				</p>
</li>
<li>Observe the live display and adjust your camera lens, <b>Exposure, Brightness,</b> and <b>Contrast</b> for an optimum image. </li>
<p>Turn off <b>Live Display</b> to complete this setup procedure. </p>
<li>Click on the <b>Strobe and Trigger</b> tab to display the following dialog. </li>
<p class="fig"><img src="p/story01.chooseStrobe.gif"></p>
<li>Use this dialog to setup the strobe and trigger for your application. 
		See <a href="ms-its:ControlReference.chm::/CognexCore.AcqFifoReference.html#strobe_and_trigger_tab">Strobe and Trigger Tab</a> for a detailed description of strobes and triggers. </li>
<li>Click on <b>Image Properties</b> to display the following tab.</li>
<p class="fig"><img src="p/story01.chooseIP.gif"></p>
<li>The <b>Region</b> dialog allows you to choose a region of interest (ROI) in the acquired image. The settings
		shown include the entire 640x480 pixel image with the ROI origin in the upper-left hand corner. Change the ROI if you wish.</li>
<li>The <b>Output Pixel Format</b> pull down menu allows you to choose an image format. 
		This is the format of the image that will be returned to you from the acquisition system. This may, or may not, be the format
		the camera outputs. If the camera outputs a pixel format different from what you choose here, the acquisition system performs
		a conversion for you. For best performance, the <b>Output Pixel Format</b> should match the camera output so that no conversion is required.</li>
<p><b>RGB Planer</b> is the standard color format for VisionPro  color vision tools. <b>Grey 8</b> selects
		a true grey scale image format which is used by most vision tools.  A third choice, <b>Raw</b>, (not shown here) is available if
		your camera produces a Bayer color format. If you choose to work with the Bayer format you will have to convert it to <b>RGB Planer </b>
		or <b>Grey 8</b> format if you want to use it with vision tools. You can use the <b>CogImageConvert</b> tool to make this conversion. </p>
<li>If your color camera supports a color <b>Lookup Table</b> this tab will appear in your dialog. Consult your camera User's Manual
		for information on using this camera feature. </li>
</ol>
<h3><a name="#white_balance"></a>White Balance</h3>
<ol>
<p>Some FireWire cameras offer White Balance adjustment. If the camera associated with the <b>Frame Grabber</b> and
	<b>Video Format</b> you have specified supports white balance adjustment, white balance dialog will appear in the lower right-hand
	corner of the <b>Settings</b> tab as shown below.</p>
<p class="fig"><img src="p/story01.whiteBalance.gif"></p>
<p>Set the <b>Red Gain</b> and <b>Blue Gain</b> values to manually adjust the white balance. If your camera supports
	automatic white balance, the <b>Auto White Balance</b> button will also appear in your dialog. Consult your camera User's Manual for
	information on how to adjust the white balance for your camera. </p>
</ol>
<h2><a name="#opening_an_image_database"></a>Opening an Image Database</h2>
<p>
			For this example, you'll use a small database of coin images 
			installed, by default, in <tt>\Program Files\Cognex\VisionPro\Images\coins.idb</tt>.
		</p>
<ol>
<li>Double-click the <b>Image Source</b> item in the QuickBuild window.</li>
<p class="fig"><img src="p/story01.chooseIDB.gif"></p>
<p>QuickBuild opens a <b>QuickBuild Job Editor</b> dialog and then an <b>Image Source</b> dialog. </p>
<li>When the <b>Image Source</b> dialog opens, select <b>Acquire from image database</b>.</li>
<li>Click <b>Choose File</b> to select an image database file.
				<p>
					For this tutorial, use the file <tt>coins.idb</tt>
					located in <tt>\Program Files\Cognex\VisionPro\Images</tt>.
				</p>
</li>
<li>Click the <b>Live Display</b> button in the dialog.
				<p>
					A live display window opens that cycles through each of the images in the database.
				</p>
</li>
<li>When you've seen enough, close the live display window and the <b>Image Source dialog</b>.</li>
</ol>
<h2><a name="#running_the_job"></a>Running the Job</h2>
<p>At this point your job has only the image source in it. (The Image Source is a special kind of tool that is only available within QuickBuild.) You can run the job to see how an image appears in the tool group window.</p>
<ol>
<li>Click the <b>Run</b> button in the tool group's tool bar.
			<p class="fig"><img src="p/story01.runimage.gif"></p>
</li>
<li>The image acquired from the image database file appears in the display area.</li>
<li>When you run a tool, a small green dot next to the tool indicates that it ran successfully.</li>
<li>When all the tools in a job ran successfully, a green dot appears in the lower left corner of the Job Editor.</li>
<li>Click the <b>Run</b> button until you see an image of the large black circle.</li>
</ol>
<p>
		In the next step, you'll add a PMAlign tool and configure it to find the coins in each image. 
	</p>
<h1><a name="#setting_up_your_pmaligntool"></a>Setting  Up Your PMAlignTool</h1>
<p>
				This example uses the CogPMAlign tool to look
				for round shapes (coins) in the image. The PMAlign tool
				uses Cognex PatMax software to locate patterns
				in an image. It's very fast, accurate, and flexible.
		</p>
<p>
				You can learn more about PatMax and the PMAlign tool by reading the 
				<a href="ms-its:UsersGuide.chm::/Search.PMAlign.Theory.PatMax.html">PatMax Software</a> theory guide
				the <a href="ms-its:ControlReference.chm::/CognexPatmaxAlign.Reference.html">PMAlign Edit Control</a> reference.
		</p>
<h2><a name="#adding_the_patmax_align_tool_to_the_job"></a>Adding the PatMax Align Tool to the Job</h2>
<p>	
		The first thing to do is add a CogPMAlign tool to your QuickBuild project.
	</p>
<ol>
<li>Click the toolbox button to open the toolbox.
			<p class="fig"><img src="p/story01.addPMTool01.gif"></p>
</li>
<li>When the Toolbox appears, select the <b>CogPMAlignTool</b> and drag it to the Job Editor.</li>
<li>A new CogPMAlign tool appears under the <b>Image Source</b>.</li>
<li>Click on the <b>OutputImage</b> of the <b>Image Source</b> and drag to the <b>InputImage</b> of the tool to link the acquired image with the tool.
			<p class="fig"><img src="p/story01.addPMTool02.gif"></p>
			This tells the PMAlign tool to use the image source for its input image.
		</li>
</ol>
<h2><a name="#creating_the_pattern"></a>Creating the Pattern</h2>
<p>
		The PMAlign tool can make a pattern several ways. This example uses the a round dot the size of a coin as a pattern. If you used the actual image of a coin, the tool would try to match those features as well. This example uses the PatQuick algorithm, a PMAlign tool option that improves the search speed of the tool at the cost of some accuracy. In this application, the search for coins doesn't require very high accuracy. </p>
<p>Double click on <b>CogPMAlignTool1</b> to open the tool.</p>
<ol>
<li>
			Choose <b>PatQuick</b> from the <b>Algorithm</b> drop-down menu.
			This tells the tools to use the faster PatQuick algorithm which is appropriate for this example.
			<p class="fig"><img src="p/story01.chooseAlgorithm.gif"></p>
</li>
<li>
			Click <b>Grab Train Image</b> to have to tool use the current input image as the training image.
		</li>
<li>
			Click the <b>Train Region &amp; Origin</b> tab to set up the training parameters.
		</li>
<li>When the tab changes, choose <b>Current.TrainImage</b> from the display menu to display
		the training image you grabbed.
			<p class="fig"><img src="p/story01.pmtrainregionimageandshape.gif"></p>
</li>
<li>Choose <b>CogRectangle</b> from the <b>Region Shape</b> drop-down menu.
			This tells the tool that you will be selecting a simple rectangular area to train.
		</li>
<li>Click and drag the small training region rectangle to enclose the large dot to tell the tool what
				part of the image to use as a pattern.
				<p class="fig"><img src="p/story01.pmtrainregionpqdrag.gif"></p>
</li>
<li>Click the <b>Center Origin</b> button to move the origin icon to the center of the rectangle.
			When the tool finds a feature in an image, it uses the relative location of the origin icon to report its location.
			In most cases, the center of the thing you're looking for is the position you want to report.
		</li>
<li>Click on the <b>Train Params</b> tab to finish training the pattern.</li>
<li>Check the <b>Ignore Polarity</b> option. Polarity tells the tools whether it should
			consider or ignore whether the pattern is dark on a light background or light on dark background.
			Since this pattern is dark on a light background, and depending on the lighting, the coins may be either light or dark
			against the background, ignoring polarity is the right thing to do in this case.
			<p class="fig"><img src="p/story01.pmtrainpqfinal.gif"></p>
</li>
<li>Click the <b>Train</b> button.
				The trained pattern appears in the Pattern panel,
				and the word <i>Trained</i> appears at the bottom of the tool.
		</li>
</ol>
<p>
		You may notice the information message that reads 
			<i>Pattern may contain insufficient information to measure Angle reliably</i>.
		Since the pattern you're using is circular, it's expected that the PatMax software would
		not be able to determine if it's rotated. 		
	</p>
<h2><a name="#trying_it_out"></a>Trying it Out</h2>
<p>
		Now you're ready to see how your patterns work.
	</p>
<ol>
<li>Choose <b>LastRun.InputImage</b> from the image drop-down list. The last run image
				shows the results of the most recent run. Since you haven't run the tool yet, this image may be blank.
				<p class="fig"><img src="p/story01.pmfirstrunpq.gif"></p>
</li>
<li>Click the <b>Run</b> button to run the tool.</li>
<li>Since you used the current image as the training pattern, the tool should have no problem finding it.
				<p class="fig"><img src="p/story01.pmfirstrunpqgoodresult.gif"></p>
</li>
<li>Click the <b>Results</b> tab to see the results that tool produced.</li>
<li>The Results pane lists all of the features that were found in the image. You can examine
				the score, location, and other results for each feature.
			<p class="fig"><img src="p/story01.pmresultstabpq.gif"></p>
<p>When you select a row in the Results pane, the corresponding shape is highlighted in blue in the display pane.</p>
<p>You can use this pattern to find any round shape in an image. But since you want to find several coins
					of different sizes, you need to set up the tool to be more flexible with the pattern.
			</p>
</li>
<li>Click the <b>Run Params</b> tab to adjust the tool's run parameters to change the way it deals with
			objects of different sizes.</li>
</ol>
<h2><a name="#adjusting_the_run_parameters"></a>Adjusting the Run Parameters</h2>
<p>
		Creating and training the pattern tells the PMAlign tool what to look for.
		The run parameters tell the tool how to go about finding it.
	</p>
<ol>
<li>Set the <b>Approx. number to find</b> to 10. This number is a guide for the tool, not a threshold.
		The tool may find more than this number of instances.
		<p class="fig"><img src="p/story01.pmrunparamspq.gif"></p>
</li>
<li>Click the scale arrow to point to the right, and set the Low threshold to 0.7 and the High threshold to 1.1.
		<p>This setting lets you select the relative sizes of the things you are looking for. In this example, you trained
			your pattern with the largest coin you expect. The smallest coin in this set is the US dime; its diameter is about
			70% that of the largest coin, the US quarter.
		</p>
<p>
			The scale factor is also used to take into consideration slight differences in size and distance from the camera.
		</p>
</li>
</ol>
<p>
		Everything should be set up now to find coins:
		<ul>
<li>You selected an image to use as a pattern.</li>
<li>You trained the pattern.</li>
<li>You set up the run parameters to find the items you're looking for.</li>
</ul>
</p>
<h2><a name="#running_the_entire_job"></a>Running the Entire Job</h2>
<p>
		You're ready to run the entire job.
		Close the CogPMAlign tool window, or drag it out of the way, so you can see the QuickBuild job editor.
	</p>
<ol>
<li>Click the <b>Run Job Once</b> button.
			<p class="fig"><img src="p/story01.qbrunthetool.gif"></p>
</li>
<li>QuickBuild runs the entire job:
			<ul>
<li>It acquires the next image, either from the image database or the camera.</li>
<li>It runs the CogPMAlignTool to find the items in the image.</li>
<li>It displays the results in the display pane.</li>
</ul>
</li>
<li>You can click <b>Run Job Continuously</b> to have QuickBuild acquire images and run the tool until you click the button again. </li>
</ol>
<p>
		At this point in developing your vision application,
		you would experiment with the kinds of images you're
		likely to process, and adjust the tool parameters, camera alignment, and lighting.
		If you need to do that for this application, double-click
		on the CogPMAlignTool1 entry in the QuickBuild job editor.
	</p>
<h1><a name="#analyzing_results"></a>Analyzing  Results</h1>
<p>
		At this point, your application does what it is designed
		to do: find coins in an image. Now it's time to make it
		more interesting.
		Most vision applications involve checking an image to see if 
		it meets some criteria. In this application, you will check
		whether the image contains a minimum number of coins.
	</p>
<p>
		Every VisionPro tool has a result status that it displays at the lower left corner of the tool edit control.
		In the QuickBuild Job Editor, you can see each tool's status as a small icon to the right of the tool's name.
		The results status of the entire job depends on all of the tools in it passing.
	</p>
<p class="fig"><img src="p/story01.qbjobeditorsuccessicons.gif"></p>
<p>
		Ideally, the PMAlign tool would pass when it finds the number of coins
		you want, and fail if there were fewer. But since you can use the PMAlign
		tool for much more than counting, it's better if you decide what information
		that the tool generates is relevant to your application.
	</p>
<p>
		To do this, you'll expose some additional results that the PMAlign tool
		generates, and 
		you'll use a new tool, the Results Analysis tool to compute an
		inspection status for the entire job.
	</p>
<h2><a name="#exposing_new_terminals_to_the_pmalign_tool"></a>Exposing New Terminals to the PMAlign Tool</h2>
<p>
		By default, the PMAlign tool exposes the score and pose information for the
		first item found. (Pose information contains information about the position and size
		of the found pattern.) The data you want to expose are the number of coins 
		you expected to find and the actual number to find. To do this, you need to
		add terminals to the PMAlign tool.
	</p>
<ol>
<li>
			Right-click on the CogPMAlign tool in the QuickBuild Job Editor window.
			<p class="fig"><img src="p/story01.qbjeterminal.gif"></p>
</li>
<li>
			Choose <b>Add Terminals</b> from the pop-up menu.
		</li>
<li>
			The Member Browser dialog opens.
			<p class="fig"><img src="p/story01.pbinitial.gif"></p>
<p>
			The member browser exposes the underlying structure of the tool, which can be fairly complex.
			To reduce this complexity the browser provides three structure levels; <b>Typical</b>, 
			<b>Expanded</b> and <b>All</b> which you can choose from the pull down menu.
			Typical, the default, displays only the most often used elements. Expanded displays
			a somewhat longer list and All displays the entire structure. 
			</p>
<p>The <b>Auto Expand</b> pull down menu gives you the option to automatically expand
			commonly used property collections. When you choose <b>Common Members</b>, the default, 
			common members are expanded automatically when they are displayed. If you choose <b>None</b>,
			no property collections are expanded automatically.  We will use None in this example to minimize the
			screen clutter. </p>
<p>
		The following table shows the most commonly used property collections displayed by the browser.
		These property collections are implemented as classes in .NET, and most of the
		time they correspond to the tabs in the tool edit control.
	</p>
<div class="tablediv"><table cellspacing="0" class="dtTABLE">
<caption align="top"><a name="#parts_of_a_visionpro_tool"></a><i>Table 1. Parts of a VisionPro Tool</i></caption>
<tr>
<th>Property Collection (Class)</th>
<th>Description</th>
</tr>
<tr>
<td>Results</td>
<td>This collection of properties holds the results that the tool generates.</td>
</tr>
<tr>
<td>RunParams</td>
<td>This collection of properties contain the parameters that control how the tool runs.</td>
</tr>
</table>
</div>
<p>
		The next set of steps take you through the process of exposing the two pieces of data you
		want: the number of coins you expected to find and the number of coins the tool found.
	</p>
</li>
<li>Click the <b>Results</b> entry to expand it.
			<p class="fig"><img src="p/story01.pbaddcount.gif"></p>
</li>
<li>Choose the <b>Count</b> entry.</li>
<li>Click the <b>Add Output</b> button. This makes the Results property an output terminal of the PMAlign tool.
				The dialog doesn't close so you can add more terminals.
		</li>
<li>Click the <b>RunParams</b> entry to expand it. Scroll down to find the <b>ApproximateNumberToFind</b> entry and click it.
				<p class="fig"><img src="p/story01.pbaddapprox.gif"></p>
</li>
<li>Click the <b>Add Output</b> button to make the ApproximateNumberToFind property an output terminal. You'll notice that
				the <b>Add Input</b> button is enabled in this case. That means that you can use this terminal as an input terminal as well.
		</li>
<li>Click the <b>Close</b> button.</li>
<li>The new terminals appear in the QuickBuild Job Editor.
			<p class="fig"><img src="p/story01.qbjenewterminals.gif"></p>
</li>
</ol>
<p>
		The next task is to set up a Results Analysis tool to accept the values of the two new output terminals you just added.
	</p>
<h2><a name="#adding_a_results_analysis_tool_to_the_job"></a>Adding  a Results Analysis Tool to the Job</h2>
<ol>
<li>If it's not already open, click the <b>Floating Toolbox</b> button to open the toolbox.
				<p class="fig"><img src="p/story01.addratool.gif"></p>
</li>
<li>
			Select the <b>CogResultsAnalysis Tool</b> from the toolbox.
		</li>
<li>
			Drag it to the QuickBuild Job Editor.
		</li>
</ol>
<h2><a name="#setting_up_the_results_analysis_tool"></a>Setting Up the Results Analysis Tool</h2>
<ol>
<li>Double-click on the CogResultsAnalysisTool1 entry in the QuickBuild Job Editor to open the Results Analysis tool.</li>
<li>When the tool's edit control dialog opens, click the <b>Add Input</b> button twice.
				<p class="fig"><img src="p/story01.rainitial.gif"></p>
<p>
					Two new items named <b>InputA</b> and <b>InputB</b> appear in the list.
				</p>
</li>
<li>
			Click on the item names to rename them. Rename them to more meaningful names: <b>NumberFound</b> and <b>Minimum</b>.
			<p class="fig"><img src="p/story01.ranamingterminals.gif"></p>
<p>
				Now you need an expression to compare both values.
			</p>
</li>
<li>
			Click the <b>Add Expression</b> button.
			<p class="fig"><img src="p/story01.raaddexpression.gif"></p>
</li>
<li>
			A new expression line appears in the list.
			<p>			The expression you're going to build is one that says "Reject any results where the NumberFound is less than the Minimum."</p>
</li>
<li>
				To create this expression, select the relation first. Click the <b>Operator</b> cell in the expression and choose
				<b>LessThan</b>.
				<p class="fig"><img src="p/story01.ramakeexpression01.gif"></p>
<p>When you do this, the entries in the <b>Argument</b> columns will be red, and the <b>Value</b>
					column will say ERROR. This is OK because you're not finished making the expression.
				</p>
<p class="fig"><img src="p/story01.ramakeexpression02x.gif"></p>
</li>
<li>
			Choose <b>NumberFound</b> for the <b>Argument0</b> cell and <b>Minimum</b> for the <b>Argument1</b> column.
			<p class="fig"><img src="p/story01.ramakeexpression03.gif"></p>
			That completes the expression.
		</li>
<li>
			The last step is setting up the rejection criteria. You want to reject the image when the expression you created is True.
			Choose <b>ExprC</b> for <b>Argument1</b> in the <b>Output</b> line.
			<p class="fig"><img src="p/story01.ramakeexpression04.gif"></p>
<p>
				This says that the Results Analysis tool will return a Reject status whenever <b>ExprC</b> is True;
				in other words when the number of coins found is less than the minimum.
			</p>
</li>
</ol>
<h2><a name="#connecting_the_new_terminals_to_the_results_analys"></a>Connecting the New Terminals to the Results Analysis Tool</h2>
<p>
		Now you need to connect the terminals you created for the PMAlign tool
		to the inputs of the Results Analysis tool.
	</p>
<ol>
<li>Click the <b>+</b> icon to the left of the <b>CogResultsAnalysisTool1</b> to expose the inputs you defined for the tool.
			<p class="fig"><img src="p/story01.linkpmtora.gif"></p>
</li>
<li>Click the <b>Results.Count</b> output for the PMAlign tool and drag it to the <b>NumberFound</b> input of the
			of the Results Analysis tool. Do the same for the <b>Results.ApproximateNumberToFind</b> terminal of the PMAlign tool
			and the <b>Minimum</b> input of the Results Analysis tool.
		</li>
</ol>
<h2><a name="#trying_it_out"></a>Trying It Out</h2>
<p>
		Now you're ready to see how everything works.
		Arrange the QuickBuild Job Editor window and the CogResultsAnalysisTool1 windows so you can see both at the same time.
		Note that tool windows always appear in front of the job editor window.
	</p>
<ol>
<li>Click the <b>Run Job Once</b> button to run your vision application.
			<p class="fig"><img src="p/story01.runapp01.gif"></p>
</li>
<li>
			When the PMAlign tool runs, the number of coins found and the number expected to be found are transferred to the Results Analysis tool.
		</li>
<li>
			Since <b>ExprC</b> was True, the number of coins found was less than the minimum number of coins, the status of
			the Results Analysis tool is Reject. 
		</li>
<li>The Reject status propagates to the entire job.
			A reject-level result means that all the tools in the job ran correctly, but that the criteria for acceptance weren't met.
			In this case, the PMAlign tool found too few coins.	
		</li>
</ol>
<h2><a name="#making_changes_to_the_job"></a>Making Changes to the Job</h2>
<p>
		Try changing the <b>Approx. no. to find</b> setting in the PMAlign tool to see how that affects running the job.
	</p>
<ol>
<li>Double-click on the <b>CogPMAlignTool1</b> item in the Job Editor window to open the tool.
			<p class="fig"><img src="p/story01.runapp02.gif"></p>
</li>
<li>Click the <b>Run Params</b> tab in the PMAlign edit control.</li>
<li>Set the <b>Approx. no. to find</b> to <b>3</b>.</li>
<li>Click the <b>Run Job Once</b> button in the QuickBuild Job Editor.</li>
<li>Now you can see the new <b>Minimum</b> value in the Results Analysis tool.
			<p class="fig"><img src="p/story01.runapp03.gif"></p>
</li>
<li>Since the expression evaluated to False (the number of coins found was not less than the minimum), the Results Analysis
			tool passes.</li>
<li>The Passing result propagates to the rest of the job.</li>
</ol>
<p>
		The next section shows you how to keep track of the results of your application.
		Keeping historical results is useful to see how your application is running,
		and it also makes turning your vision application into deployable software much easier.
	</p>
<h1><a name="#keeping_track_of_results"></a>Keeping Track of Results</h1>
<p>
		When you're using a vision application, you often want to be able to look
		at previous results. QuickBuild uses the <b>Posted Items</b> list
		to hold the results of completed runs of each job. Another list,
		the <b>Failure Results Queue</b>  holds the results of failed requests.
	</p>
<p>
		Until now, you've been using the QuickBuild Job Editor which lets
		you work with a job, a collection of tools. In this section, you'll 
		be working with the main QuickBuild window which contains
		the entire application. In this case, the application has only one job,
		but in more complex situations, you would have several jobs as part
		of the same application.
	</p>
<p class="fig"><img src="p/story01.qbinitial.gif"></p>
<h2><a name="#configuring_the_application_to_save_rejection_resu"></a>Configuring the Application to Save Rejection Results</h2>
<p>
		By default, QuickBuild is set up to remember the last 32
		job executions and the last 32 job failures. For this application
		you want the Failure Results Queue to also include those
		executions where the job ran correctly but the result was
		a rejection (not enough coins).
	</p>
<ol>
<li>Click the <b>Configure QuickBuild Application Properties</b> button in the QuickBuild window.
			<p class="fig"><img src="p/story01.qbconfigappprops.gif"></p>
<p>As you can see,  the <b>Posted Items</b> list size is already set to 32.</p>
</li>
<li>
			Check the <b>Reject</b> option in the <b>Failure Queue</b> section. This means that
			the failure queue will contain results in which the job failed and in which the job returned a reject-level status.
		</li>
<li>Click <b>OK</b>.</li>
</ol>
<p>The next step is to specify which results you want to save in the Posted Items list.</p>
<h2><a name="#setting_up_the_posted_items_list"></a>Setting Up the Posted Items List</h2>
<p>
</p>
<ol>
<li>Click the <b>Configure Posted Items</b> button in the QuickBuild window.
			<p class="fig"><img src="p/story01.qbconfigposteditems.gif"></p>
</li>
<li>If your application had more than one job, you would select the job name.</li>
<li>Make sure that  the <b>Include LastRunRecord image and graphics</b> option is selected so that
			the image and results graphics are saved with the result.
		</li>
<li>Click the <b>Add Item</b> button to begin adding items to the Posted Items list.
			The <b>Configure Posted Items</b> browser opens.
		</li>
<p>
<p class="fig"><img src="p/story01.qbconfigposteditems02.gif"></p>
</p>
<p>
			The Configure Posted Items browser exposes the underlying structure of the tool, which can be fairly complex.
			To reduce this complexity the browser provides three structure levels; <b>Typical</b>, 
			<b>Expanded</b> and <b>All</b> which you can choose from the pull down menu.
			Typical, the default, displays only the most often used elements. Expanded displays
			a somewhat longer list and All displays the entire structure. For this example you will need to choose
			<b>Expanded</b>. 
			</p>
<li>
			Click the <b>+</b> icon next to the <b>Tools</b> entry to expand it.
			<p>
				You'll see the three tools in your job listed by name here: the Image Source tool, the PMAlign tool,
				and the Results Analysis tool.
			</p>
</li>
<li>
			Click the <b>+</b> icon next to the <b>CogResultsAnalysisTool1</b> entry to expand it.
		</li>
<li>
			Continue expanding the following items to reach the value of the <b>NumberFound</b> entry of the Results Analysis tool:<br>
				CogResultsAnalysisTool /  RunParams / Item["NumberFound"] / CogResultsAnalysisExpression / Value / Int32
			<p class="fig"><img src="p/story01.qbconfigposteditems03.gif"></p>
<ul>
</ul>
</li>
<li>Click <b>Add to Posted Items</b> to add the <b>NumberFound</b> value to the Posted Items list.
		The browser stays open so you can add more entries.</li>
<li>
			Expand the following items to reach the value of the <b>Minimum</b> entry of the Results Analysis tool<br>
				 Item["Minimum"] / CogResultsAnalysisExpression / Value / Int32
			<p class="fig"><img src="p/story01.qbconfigposteditems04.gif"></p>
</li>
<li>Click <b>Add to Posted Items</b> to add the <b>Minimum</b> value to the Posted Items list.</li>
<li>Click <b>Close</b> to close the Configure Posted Items browser. Your Posted Items window will look like this:
			<p class="fig"><img src="p/story01.qbconfigposteditems05.gif"></p>
</li>
</ol>
<h2><a name="#running_the_application_and_examining_results"></a>Running the Application and Examining Results</h2>
<p>Now that you have the Posted Items list and the Failure Results Queue set up, you can see how they work.</p>
<ol>
<li>
			In the QuickBuild window, click the <b>Run QuickBuild Application Continuously</b> button. 
			<p>This starts the application running. You will notice the icon to the right of the job name change from a green dot (for successful images) to a green dot with a red slash (for rejected images).	</p>
<p class="fig"><img src="p/story01.qbresults01.gif"></p>
</li>
<li>
			After a few seconds, click the <b>Show Floating Results</b> button.
		</li>
<li>
			The <b>QuickBuild Results</b> window opens. The data fields will update as the
			job runs, but the image will not.
		</li>
<li>Click the <b>Run QuickBuild Application Continuously</b> button again to stop the application.
			<p class="fig"><img src="p/story01.qbresults02.gif"></p>
</li>
<li>
			Scroll to the end of the data fields to see the results you added to the Posted Items list
			and their values.
			The names of the items are rather long; if you allow your mouse to hover over the entry,
			you can see the entire name.
		</li>
<li>
			The display area shows the image results.
		</li>
<li>
			Very often, however, you're interested only in the images that fail. Recall that you 
			enabled the option to add reject-level results to the Failure Results Queue. Click
			the <b>Failure Results Queue</b> to see the rejected images.
			<p class="fig"><img src="p/story01.frq.gif"></p>
</li>
<li>
			You can use the buttons at the top of the QuickBuild Results window to examine
			other saved results.
		</li>
</ol>
<p>
		At this point you have the basic skills you need to develop and refine
		a vision application with VisionPro and QuickBuild. At this stage of
		development, you might test different image sets,  refine your patterns,
		tailor the results you want to report, and so on.
	</p>
<p>
		As you make changes to your QuickBuild application,
		it's a good idea to save it.
		<p class="fig"><img src="p/story01.qbfilesave.gif"></p>
</p>
<p>QuickBuild saves applications as QuickBuild Project Files
	with the extension .VPP.</p>
<p>
		Once you are ready to deploy your application, you can use
		your saved QuickBuild application and 
		the VisionPro Application Wizard to create an executable
		Windows application.
	</p>
<p>
		Go on to <a href="ms-its:GettingStarted.chm::/storyAW.html">Creating a Vision Application: Using the Application Wizard</a>
		to continue the tutorial.
	
	</p>
</div>
<DIV CLASS="footer"><br><HR>
<p><a href="copyright.html">© 2008 Cognex Corporation. All rights reserved.</a></p>
</DIV>
</body>
</html>
